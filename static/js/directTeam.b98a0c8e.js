(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["directTeam"],{"16e1":function(t,s,e){t.exports=e.p+"static/img/ys.7df2d9e1.png"},"2c92":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.isWechat?t._e():e("div",{staticClass:"header"},[e("div",{staticClass:"header_body"},[e("span",{staticClass:"goBack",on:{click:t.goBack}},[e("van-icon",{attrs:{name:"arrow-left"}})],1),e("div",{staticClass:"flex-vertical-centering"},[e("p",{staticClass:"textEllipsis",on:{click:t.showLog}},[t._v("\n        "+t._s(t.headerName)+"\n      ")])]),t.shareShow?e("span",{staticClass:"shareSheet",on:{click:t.shareSheet}},[t._v("分享")]):t._e()])])},n=[],i={name:"TopMsg",props:{headerName:{type:String,default:""},required:{type:Boolean,default:!0},shareShow:{type:Boolean,default:!1}},data:function(){return{clickNum:0}},computed:{isWechat:function(){return this.$store.state.isWechat}},watch:{$route:function(){this.clickNum=0}},created:function(){},methods:{goBack:function(){var t=this;t.$router.go(-1)},shareSheet:function(){this.$emit("shareSheet")},showLog:function(){if(this.clickNum++,5===this.clickNum){this.clickNum=0;var t=document.getElementsByClassName("vc-switch")[0],s=window.getComputedStyle(t,null).getPropertyValue("display");"block"===s?VCONSOLE.hide():VCONSOLE.show()}}}},r=i,c=(e("9243"),e("2877")),o=Object(c["a"])(r,a,n,!1,null,"2cd8e979",null);s["a"]=o.exports},"32d6":function(t,s,e){t.exports=e.p+"static/img/pt.660b7e4c.png"},3744:function(t,s,e){t.exports=e.p+"static/img/js.5bbd3541.png"},"3a79":function(t,s,e){"use strict";var a=e("c6984"),n=e.n(a);n.a},"615d":function(t,s,e){t.exports=e.p+"static/img/VIP.3df5215c.png"},"89e2":function(t,s,e){t.exports=e.p+"static/img/zs.0e756ab1.png"},"8c64":function(t,s,e){},9243:function(t,s,e){"use strict";var a=e("8c64"),n=e.n(a);n.a},c6984:function(t,s,e){},dd0a:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"direct-team-page"},[a("top-msg",{attrs:{"header-name":t.isAllDirect?"我的直推用户":t.$route.query.rank_name}}),t.isAllDirect?t._e():a("div",{staticClass:"clear sub-title"},[a("span",{staticClass:"lt text"},[t._v("我的直推用户")]),a("span",{staticClass:"rt text"},[t._v("共"+t._s(t.teamCount)+"人")])]),a("ul",{staticClass:"list"},t._l(t.list,(function(s,n){return a("li",{key:n,staticClass:"item",on:{click:function(e){return e.stopPropagation(),t.toNext(s)}}},[a("div",{class:["top","clear",t.isAllDirect?"border":""]},[a("span",{staticClass:"img-box lt"},["普通用户"===s.rank_name||"免费用户"===s.rank_name?a("img",{attrs:{src:e("32d6")}}):"VIP"===s.rank_name?a("img",{attrs:{src:e("615d")}}):"银商"===s.rank_name?a("img",{attrs:{src:e("16e1")}}):"金商"===s.rank_name?a("img",{attrs:{src:e("3744")}}):"钻商"===s.rank_name?a("img",{attrs:{src:e("89e2")}}):t._e()]),a("span",{staticClass:"user lt"},[a("p",{staticClass:"name"},[s.user_id_card_name||s.user_phone_num?a("span",{on:{click:function(e){return t.toCall(s.user_phone_num)}}},[t._v(t._s(s.user_id_card_name||s.user_phone_num.substring(0,3)+"****"+s.user_phone_num.substring(7,11)))]):t._e()]),a("p",{staticClass:"type flex-row-center"},[a("span",[t._v(t._s(s.rank_name))])])]),a("span",{class:["rt","num",t.isAllDirect?"no-margin":""]},[s.user_id_card_name?a("p",{staticClass:"text"},[t._v("直推"+t._s(s.first_level_count)+"人 间推"+t._s(s.other_level_count)+"人")]):t._e()])]),a("div",{class:["bottom","clear",t.isAllDirect?"border":""]},[a("span",{staticClass:"text lt"},[t._v("注册时间："+t._s(s.gmt_create))]),s.user_id_card_name?a("span",{staticClass:"text gold rt"},[t._v("\n          累计消费金额：\n          "),a("span",{staticClass:"price"},[t._v(t._s((s.trade_amount_sum/100).toFixed(2))+"元")])]):t._e()])])})),0),a("van-dialog",{attrs:{"show-confirm-button":!1,"before-close":t.beforeUpgradeDialog,"close-on-click-overlay":""},model:{value:t.upgradeDialog,callback:function(s){t.upgradeDialog=s},expression:"upgradeDialog"}},[a("div",{staticClass:"upgrade flex-column-center"},[a("span",{staticClass:"title"},[t._v("确认支付升级？")]),a("div",{staticClass:"content"},[t._v("\n        支付"),a("span",{staticClass:"integral"},[t._v(t._s(t.upgradeMsg.upgrade_points)+"积分")]),t._v("为以下用户升级为"+t._s(t.upgradeMsg.next_rank_name)+"会员\n      ")]),a("span",{staticClass:"msg"},[t._v(t._s(t.upgradeMsg.user_id_card_name)+" "+t._s(t.upgradeMsg.user_phone_num))]),a("div",{staticClass:"upgradeBtn flex-row-between"},[a("div",{staticClass:"return",on:{click:t.closeUpgradeDialog}},[t._v("\n          返回\n        ")]),a("div",{staticClass:"pay",on:{click:function(s){return t.upgradeUser(t.upgradeMsg.user_id)}}},[t._v("\n          支付\n        ")])])])]),a("van-dialog",{attrs:{"show-confirm-button":!1,"before-close":t.beforeSuccessDialog,"close-on-click-overlay":""},model:{value:t.successDialog,callback:function(s){t.successDialog=s},expression:"successDialog"}},[a("div",{staticClass:"successDialog flex-column-center"},[a("i",{staticClass:"iconfont icon-gou"}),a("span",{staticClass:"title"},[t._v("支付成功")]),a("span",{staticClass:"integral"},[t._v(t._s(t.upgradeMsg.upgrade_points)+"积分")]),a("span",{staticClass:"userMsg"},[t._v(t._s(t.upgradeMsg.user_id_card_name)+" "+t._s(t.upgradeMsg.user_phone_num))]),a("span",{staticClass:"tip"},[t._v("升级为"+t._s(t.upgradeMsg.next_rank_name)+"会员")]),a("div",{staticClass:"successBtn",on:{click:t.successBtnFun}},[t._v("\n        确定\n      ")])])]),a("van-dialog",{attrs:{"show-confirm-button":!1,"before-close":t.beforeFailDialog,"close-on-click-overlay":""},model:{value:t.failDialog,callback:function(s){t.failDialog=s},expression:"failDialog"}},[a("div",{staticClass:"failDialog flex-column-center"},[a("i",{staticClass:"iconfont icon-x"}),a("span",{staticClass:"title"},[t._v("支付失败")]),a("span",{staticClass:"tip"},[t._v("积分余额不足")]),a("div",{staticClass:"failBtn",on:{click:t.failBtnFun}},[t._v("\n        确定\n      ")])])])],1)},n=[],i=e("2c92"),r={name:"DirectTeam",components:{topMsg:i["a"]},data:function(){return{teamCount:0,typeName:"钻石",list:[],isAllDirect:!1,userName:"",userRank:"",userTotal:"",upgradeDialog:!1,upgradeMsg:"",successDialog:!1,failDialog:!1}},computed:{title:function(){return this.$route.meta.title}},created:function(){this.fetchData()},beforeDestroy:function(){this.sendMsg()},methods:{toCall:function(t){event.preventDefault()||event.stopPropagation(),window.location.href="tel://"+t},upgradeUser:function(t){var s=this;this.$api.member.upgradeUser({target_user_id:t}).then((function(t){console.log(t),s.successDialog=!0})).catch((function(t){console.log(t),s.failDialog=!0}))},upgradeFun:function(t){this.upgradeMsg=t,this.upgradeMsg.upgrade_points=(this.upgradeMsg.upgrade_points/100).toFixed(2),this.upgradeDialog=!0},beforeUpgradeDialog:function(t,s){s()},beforeSuccessDialog:function(t,s){s()},beforeFailDialog:function(t,s){s()},closeUpgradeDialog:function(){this.upgradeDialog=!1},successBtnFun:function(){this.successDialog=!1,this.$router.push({path:"/bill",query:{current:"3"}})},failBtnFun:function(){this.failDialog=!1},sendMsg:function(){this.bus.$emit("userMsg",{userName:this.userName,userRank:this.userRank,userTotal:this.userTotal})},toNext:function(t){this.userName=t.user_id_card_name,this.userRank=t.rank_order,this.userTotal=t.trade_amount_sum,this.$router.push("/secondTeam?userId="+t.user_id)},fetchData:function(){var t=this,s=parseInt(this.$route.query.rankOrder),e="";this.isAllDirect=!0,isNaN(s)||(e={rankOrder:s},this.isAllDirect=!1),this.$api.member.getRankListMsg().then((function(s){var a=s.data.data;console.log(a),t.$api.member.listMyDirectTeam(e).then((function(s){s.data.data.forEach((function(t){a.forEach((function(s,e,a){t.rank_order===s.rank_order&&(t.enable_points_upgrade=a[e+1].enable_points_upgrade,t.upgrade_points=a[e+1].upgrade_points,t.next_rank_name=a[e+1].rank_name)}))})),t.list=s.data.data,t.teamCount=t.list.length,t.list.length>0&&(t.typeName=t.list[0].rank_name),console.log(t.list)}))}))}}},c=r,o=(e("3a79"),e("2877")),l=Object(o["a"])(c,a,n,!1,null,"e7a03c66",null);s["default"]=l.exports}}]);