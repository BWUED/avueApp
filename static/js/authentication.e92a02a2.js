(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["authentication"],{"135d":function(t,e,a){},5515:function(t,e,a){"use strict";var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bgfff"},[a("div",[t._m(0),a("div",{staticClass:"search_warp"},[a("i",{staticClass:"icon_search"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"search_input",attrs:{type:"text",placeholder:"请输入银行名称关键词"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}})])]),a("div",{staticClass:"search_content"},[a("mt-index-list",{attrs:{height:312}},[t.searchValue?t._e():a("mt-index-section",{attrs:{index:""}},[a("li",[a("p",{staticClass:"line mint-indexsection-index"},[t._v("\n            热门银行\n          ")]),a("div",{staticClass:"hot_list"},t._l(t.bankHotListArr,(function(e,n){return a("div",{key:n,staticClass:"box",attrs:{index:n}},[a("div",{staticClass:"search_item",on:{click:function(a){return t.clickCard(e)}}},[a("div",{staticClass:"text"},[t._v("\n                  "+t._s(e.name)+"\n                ")])])])})),0)])]),t._l(t.bankListArr,(function(e,n){return a("mt-index-section",{key:n,attrs:{index:n}},t._l(e,(function(e,n){return a("li",{key:n,staticClass:"search_item",on:{click:function(a){return t.clickCard(e)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),0)}))],2)],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search_title"},[a("h5",{staticClass:"size36 color333"},[t._v("\n        选择银行\n      ")])])}],r=a("76a0");a("8635"),a("f1a6");function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l={name:"SelectCard",components:(n={},c(n,r["IndexList"].name,r["IndexList"]),c(n,r["IndexSection"].name,r["IndexSection"]),n),data:function(){return{bankListArr:{},bankHotListArr:{},searchValue:"",resultsList:""}},computed:{bankList:function(){return this.$store.state.bankList}},watch:{searchValue:function(t,e){var a=String(t).toUpperCase(),n=[];this.resultsList.forEach((function(t){-1===String(t.name).indexOf(a)&&-1===String(t.first_pinyin_letter).indexOf(a)||n.push(t)})),this.bankListArr=n.reduce((function(t,e){return t[e.first_pinyin_letter[0]]||(t[e.first_pinyin_letter[0]]=[]),t[e.first_pinyin_letter[0]].push(e),t}),{}),this.bankListArr=this.objKeySort(this.bankListArr)}},created:function(){this.getBankListFun()},methods:{thisTitle:function(){document.title="选择银行卡"},getBankListFun:function(){var t=this;t.$api.card.getBankList().then((function(e){t.resultsList=e.data.data.bank_list,t.bankHotListArr=e.data.data.hot_bank_list,console.log(t.resultsList),t.bankListArr=t.resultsList.reduce((function(t,e){return console.log(t),console.log(e),t[e.first_pinyin_letter[0]]||(t[e.first_pinyin_letter[0]]=[]),t[e.first_pinyin_letter[0]].push(e),t}),{}),t.bankListArr=t.objKeySort(t.bankListArr)}))},objKeySort:function(t){console.log(t);var e=Object.keys(t).sort();console.log(e);for(var a={},n=0;n<e.length;n++)a[e[n]]=t[e[n]];return a},clickCard:function(t){this.$emit("selectCard",t)}}},o=l,u=(a("f7a6"),a("2877")),d=Object(u["a"])(o,i,s,!1,null,"44f3eda2",null);e["a"]=d.exports},"5ba6":function(t,e,a){"use strict";var n=a("e94c"),i=a.n(n);i.a},ad6c:function(t,e,a){"use strict";a.r(e);var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-msg",{attrs:{"header-name":"个人实名认证"}}),a("div",{staticClass:"con_body"},[a("div",{staticClass:"form_cells form_cells_form bgfff mgb20"},[a("div",{staticClass:"form_cell"},[t._m(0),a("div",{staticClass:"form_cellBd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form_input",attrs:{type:"text",placeholder:"请输入您的名字"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),a("div",{staticClass:"form_cell"},[t._m(1),a("div",{staticClass:"form_cellBd"},[a("fun-components-input",{attrs:{"num-type":"identifyNo",placeholder:"请输入您的身份证件号码"},on:{onRawValue:function(e){t.identify=e}},model:{value:t.identifyShow,callback:function(e){t.identifyShow=e},expression:"identifyShow"}})],1)])]),a("div",{staticClass:"form_cells form_cells_form bgfff"},[a("div",{staticClass:"form_cell"},[t._m(2),a("div",{staticClass:"form_cellBd"},[a("fun-components-input",{attrs:{"num-type":"cardNo",placeholder:"请输入您的储蓄卡号码"},on:{onRawValue:function(e){t.cardId=e}},model:{value:t.cardIdShow,callback:function(e){t.cardIdShow=e},expression:"cardIdShow"}})],1)]),a("div",{staticClass:"form_cell",staticStyle:{display:"none"}},[t._m(3),a("div",{staticClass:"form_cellBd",on:{click:function(e){t.bankPicker=!0}}},[t.bankSelect.name?a("span",{staticClass:"size30",staticStyle:{color:"#666666"}},[t._v(t._s(t.bankSelect.name))]):a("span",{staticClass:"size30",staticStyle:{color:"#BEBEBE"}},[t._v("请选择所属银行")])])]),a("div",{staticClass:"form_cell"},[t._m(4),a("div",{staticClass:"form_cellBd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardTel,expression:"cardTel"}],staticClass:"form_input",attrs:{type:"number",maxlength:"11",placeholder:"请输入预留手机号"},domProps:{value:t.cardTel},on:{input:function(e){e.target.composing||(t.cardTel=e.target.value)}}})])])]),a("div",{staticClass:"btn_warp"},[a("button",{staticClass:"btn btn_submit",on:{click:t.confirmAuth}},[t._v("\n        确认提交\n      ")])])]),a("van-popup",{attrs:{position:"bottom"},model:{value:t.bankPicker,callback:function(e){t.bankPicker=e},expression:"bankPicker"}},[a("choose-card",{on:{selectCard:t.selectCard}})],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("姓名")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("身份证")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("储蓄卡号")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("所属银行")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("预留手机号")])])}],r=(a("e7e5"),a("d399")),c=(a("5f5f"),a("f253")),l=a("2c92"),o=a("5515"),u=a("c506"),d=(a("5b4d"),a("bc3a")),f=a.n(d);function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h={name:"Authentication",components:(n={topMsg:l["a"]},m(n,c["a"].name,c["a"]),m(n,"chooseCard",o["a"]),m(n,"FunComponentsInput",u["a"]),n),data:function(){return{tel:"",code:"",isGetCode:!1,num:60,timer:"",name:"",identify:"",identifyShow:"",isAutoUpload:"",cardId:"",cardIdShow:"",cardTel:"",bankSelect:{},bankPicker:!1,bankListArr:[],items:{}}},computed:{token:function(){return this.$store.state.token},userInfo:function(){return this.$store.state.userInfo},bankList:function(){return this.$store.state.bankList}},watch:{},created:function(){var t=this;this.thisTitle(),this.getBankListFun(),this.$store.dispatch("GetBankList").then((function(){t.judgeUserAuth()})),this.$store.dispatch("GetUserInfo").then((function(){}))},methods:{thisTitle:function(){document.title="个人实名认证"},getCodeFun:function(){var t=this,e=function(e){return t.$dialog({title:e,showCancelButton:!1,confirmButtonText:"确定",cancelButtonText:"确定",className:"dialog",closeOnClickOverlay:!0})};t.tel?t.$util.isPhone(t.tel)?t.isGetCode||(t.isGetCode=!0,t.timer=setInterval((function(){0!==t.num?t.num--:(t.isGetCode=!1,t.num=60,clearInterval(t.timer))}),1e3)):e("请输入正确的手机号码"):e("请输入您的手机号码")},confirmAuth:function(){var t=this,e=function(e){return t.$dialog({title:e,showCancelButton:!1,confirmButtonText:"确定",className:"dialog",closeOnClickOverlay:!0})};t.name?t.identify?t.cardId?t.bankSelect?t.cardTel?this.$util.isPhone(t.cardTel)?t.submitAuthentication():e("请输入正确的手机号"):e("请输入您的预留手机号码"):e("请选择储蓄卡所属银行"):e("请输入您的储蓄卡号"):e("请输入您的身份证"):e("请输入您的姓名")},submitAuthentication:function(){var t=this,e=this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"请稍候..."}),a={agentId:"10000",bankCard:t.cardId,idCard:t.identify,name:t.name,mobile:t.cardTel};f.a.post("http://app.zhr168.com/api/auth/bank4Needs/hkj/auth",a).then((function(a){e.clear();var n=a.data.data;console.log("黑科四要素......"),console.log(n),"20"==n.verification?t.$api.center.saveYskAuth({id_card_no:t.identify,id_card_name:t.name,is_auth:1,auth_msg:""}).then((function(){r["a"].success("认证完成"),t.$router.replace("/center")})):Object(r["a"])(n.message)})).catch((function(t){console.log(t),Object(r["a"])("服务异常")}))},judgeUserAuth:function(){var t=this;t.getAuthenticationFun()},getAuthenticationFun:function(){var t=this;t.$api.center.getAuthentication().then((function(e){t.name=e.data.data.id_card_name,t.identify=e.data.data.id_card_no,t.identifyShow=t.identify.replace(/(\d{6})(?=\d)/,"$1 ").replace(/(\d{8})(?=\d)/,"$1 "),t.cardId=e.data.data.bank_card_no,t.cardIdShow=t.cardId.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 "),t.cardTel=e.data.data.bank_card_phone_num,t.$set(t.bankSelect,"bank_no",e.data.data.bank_code),t.$set(t.bankSelect,"name",t.bankList[t.bankSelect.bank_no])}))},closeStatusPicker:function(t){console.log(t),this.bankSelect=t,this.bankPicker=!1},getBankListFun:function(){var t=this;t.$store.dispatch("GetBankList").then((function(){for(var e in t.bankList)t.bankListArr.push({bankNo:e,text:t.bankList[e]})}))},selectCard:function(t){console.log(t),this.bankSelect=t,this.bankPicker=!1}}},p=h,v=(a("5ba6"),a("2877")),_=Object(v["a"])(p,i,s,!1,null,"b295e9cc",null);e["default"]=_.exports},c506:function(t,e,a){"use strict";function n(t,e){if("cardNo"===e){var a=t;return a=a.replace(/\s/g,"").replace(/\D/g,"").replace(/(\d{4})(?=\d)/g,"$1 "),a}if("identifyNo"===e){var n=t;return n=n.replace(/\s/g,"").replace(/[^0-9X]/g,"").replace(/(\d{6})(?=\d)/,"$1 ").replace(/(\d{8})(?=\d)/,"$1 "),n}}e["a"]={name:"card-no-input",data:function(){return{previousValue:null}},props:{value:{type:String},numType:{type:String}},render:function(t){var e=this,a=n(e.value,e.numType);return e.previousValue=a,t("input",{attrs:{placeholder:e.$attrs.placeholder,disabled:e.$attrs.disabled},class:{form_input:!0,bold:e.value},domProps:{value:a},on:{keyup:function(t){var a=t.target;if(a.selectionStart<e.previousValue.length)e.previousValue=t.target.value;else{e.previousValue=t.target.value;var i=n(t.target.value,e.numType),s=i.replace(/\s/g,"");e.$emit("input",i),e.$emit("onRawValue",s),t.target.value=n(t.target.value,e.numType)}},blur:function(t){var a=n(t.target.value,e.numType),i=a.replace(/\s/g,"");e.$emit("input",a),e.$emit("onRawValue",i),t.target.value=n(t.target.value,e.numType)}}})}}},e94c:function(t,e,a){},f7a6:function(t,e,a){"use strict";var n=a("135d"),i=a.n(n);i.a}}]);